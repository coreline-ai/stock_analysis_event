# =========================================
# MAHORAGA Research-Only (Vercel) env example
# =========================================
# 목적:
# - 실제 매매(주문)는 절대 수행하지 않는다.
# - 시그널 수집/스코어링/LLM 판단/리포트/대시보드만 제공한다.
#
# 주의:
# - 아래 "FORBIDDEN" 섹션의 키가 실제 env에 존재하면
#   앱은 부팅 단계에서 실패하도록(강제) 구현한다.
# =========================================


# -------------------------
# Runtime
# -------------------------
NODE_ENV=development

# Public Base URL (optional, for generating links in reports)
PUBLIC_BASE_URL=http://localhost:3000


# -------------------------
# Auth / Secrets (REQUIRED)
# -------------------------
# API 보호용 토큰 (대시보드/클라이언트가 호출 시 사용)
MAHORAGA_API_TOKEN=CHANGE_ME_LONG_RANDOM

# Cron 호출 보호용 시크릿 (Vercel Cron 또는 수동 트리거 보호)
CRON_SECRET=CHANGE_ME_LONG_RANDOM

# (Optional) 비상 중단 스위치 보호용 시크릿
KILL_SWITCH_SECRET=CHANGE_ME_LONG_RANDOM


# -------------------------
# Database (REQUIRED)
# -------------------------
# Postgres connection string (Vercel Postgres/Neon 등)
DATABASE_URL=postgres://USER:PASSWORD@HOST:5432/DBNAME
# Local (docker-compose.yml uses host port 15432):
# DATABASE_URL=postgres://mahoraga:mahoraga@127.0.0.1:15432/mahoraga


# -------------------------
# Redis Lock / Cache (STRONGLY RECOMMENDED)
# -------------------------
# Upstash Redis REST (권장)
UPSTASH_REDIS_REST_URL=
UPSTASH_REDIS_REST_TOKEN=

# (대안) 일반 Redis URL을 쓸 경우(선택)
REDIS_URL=
# (테스트용) 메모리 락 사용
LOCK_MODE=


# -------------------------
# LLM Provider (REQUIRED)
# -------------------------
# OpenAI 예시
OPENAI_API_KEY=YOUR_OPENAI_KEY
LLM_MODEL=gpt-4o-mini
# (optional) stub provider for local/testing
LLM_PROVIDER=

# LLM 비용/호출 제한 (기본값 예시)
LLM_MAX_SIGNALS_PER_RUN=10
LLM_MAX_CALLS_PER_RUN=10
LLM_MAX_TOKENS_PER_CALL=1500


# -------------------------
# Pipeline Limits (RECOMMENDED)
# -------------------------
# 수집/처리량 타임박스 (서버리스 실행시간 고려)
GATHER_MAX_ITEMS_PER_SOURCE=200
SCORE_TOP_N=50
DECIDE_TOP_N=10

# 실행 간 최소 간격(초) - 중복 실행 억제 보조
MIN_SECONDS_BETWEEN_RUNS=120

# 단일 실행 타임박스 (초) - 서버리스 제한 대응
RUN_MAX_SECONDS=25


# -------------------------
# Sources (OPTIONAL)
# -------------------------
# 기본은 공개 소스(키 없이)로 동작.
# 필요 시 소스별 키를 추가(선택)한다.

# Reddit official API (optional)
REDDIT_CLIENT_ID=
REDDIT_CLIENT_SECRET=
REDDIT_USER_AGENT=mahoraga-research-only

# News API (optional)
NEWS_API_KEY=

# Crypto signals (optional)
CRYPTO_ENABLED=false
CRYPTO_SYMBOLS=BTC,ETH,SOL

# Notification (optional)
DISCORD_WEBHOOK_URL=


# -------------------------
# FORBIDDEN (MUST NOT BE SET)
# -------------------------
# 아래 항목은 Research-Only 모드에서 존재하면 안 된다.
# 실제 env에 존재할 경우, 앱은 "부팅 실패" 처리해야 한다.

ALPACA_API_KEY=
ALPACA_API_SECRET=
BROKER_MODE=
TRADING_ENABLED=
