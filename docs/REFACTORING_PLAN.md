# MAHORAGA 리팩토링 기획서
## Research-Only Signal & Timing Engine 전환 계획

---

## 0. 문서의 성격과 목적

본 문서는 기능 명세(PRD)나 기술 설계(TRD)가 아니다.

이 문서는  
**기존 MAHORAGA 프로젝트(https://github.com/ygwyg/MAHORAGA)를  
어떤 의도와 방향으로 리팩토링할 것인지 선언하는 “기획 문서”**이다.

- 무엇을 만들 것인가 (X)
- 어떻게 구현할 것인가 (X)

대신 다음을 명확히 한다:

- 왜 리팩토링하는가
- 무엇을 제거하고 무엇을 유지하는가
- 이 프로젝트가 앞으로 어떤 성격의 시스템이 되는가

PRD / TRD / 개발 계획 문서는 **이 문서를 기준으로 이후 단계에서 순차적으로 작성**한다.

---

## 1. 리팩토링 대상 정의

### 1.1 대상 저장소

- GitHub Repository  
  https://github.com/ygwyg/MAHORAGA

### 1.2 현재 MAHORAGA의 성격 요약

기존 MAHORAGA는 다음 성격을 가진 시스템이다:

- 소셜/뉴스 기반 시그널 수집
- 시그널 정규화 및 스코어링
- LLM 기반 분석 및 판단
- 조건 충족 시 실제 매매(브로커 연동) 수행
- 상태/로그/대시보드 제공

즉, **“리서치 + 자동 매매 실행까지 포함된 에이전트”**이다.

---

## 2. 리팩토링의 핵심 동기

### 2.1 문제 인식

기존 MAHORAGA에서 가장 큰 문제는 다음과 같다 Confirm:

- 실제 매매 자동화는
  - 운영 리스크가 매우 크고
  - 브로커/계정/법적/금전적 부담을 동반하며
  - 실험 및 확장에 제약을 만든다

반면, MAHORAGA의 가장 가치 있는 부분은:

- 시그널 수집 능력
- 스코어링 로직
- LLM 기반 “지금이 어떤 시점인가”에 대한 판단
- 판단의 근거를 설명하는 리서치 결과물

이다.

---

## 3. 리팩토링의 핵심 목표 (단 하나)

### “실제 매매는 하지 않는다.
### 그러나 ‘지금 사야 할 시점’은 계속 판단한다.”

이 리팩토링의 핵심 목표는 다음 한 문장으로 요약된다:

- 자동 매매 실행은 완전히 제거한다
- 하지만 “지금 진입을 고려할 시점인가?”라는 판단 기능은
  MAHORAGA의 **핵심 기능으로 유지하고 강화**한다

즉, 시스템의 정체성을 다음과 같이 전환한다:

- Before: 자동 매매 봇
- After: 시장 시점 판단 엔진 (Signal & Timing Engine)

---

## 4. 개념적 전환: Execution 제거, Decision 유지

### 4.1 기능의 재분류

기존 기능을 개념적으로 분리하면 다음 두 영역으로 나뉜다:

- Trading Decision
  - BUY / WAIT / AVOID 판단
  - 진입 근거, 리스크, 촉매, 신뢰도
  - “왜 지금인가?”에 대한 설명

- Trade Execution
  - 브로커 API 연동
  - 주문 생성, 체결, 포지션 관리

### 4.2 리팩토링 방향

- Trading Decision: 유지 + 강화 (핵심)
- Trade Execution: 완전 제거 (금지)

이 리팩토링은 “기능 축소”가 아니라  
**“책임 범위 재정의”**이다.

---

## 5. 리팩토링 후 MAHORAGA의 정체성

리팩토링 이후 MAHORAGA는 다음과 같은 시스템이 된다:

- 실제 주문은 하지 않는다
- 대신 다음을 제공한다:
  - 지금 사야 할 시점 판단
  - 판단의 근거와 논리
  - 신뢰도 및 리스크 요약
  - 데일리/테마 리포트
  - 히스토리 및 비교 가능 데이터

이는 자동 매매 시스템이 아니라:

- 리서치 엔진
- 의사결정 보조 시스템
- 시점 판단 레이어

에 가깝다.

---

## 6. 기술 스택 전환 의도 (개념 수준)

### 6.1 배포 환경 전환

- 기존: Cloudflare 중심 구조
- 목표: Vercel 배포 가능 구조

이 전환의 목적은:

- 상시 실행 에이전트 구조에서 벗어나
- 요청 기반 실행 + Cron 트리거 구조로 이동
- 리서치/리포트 중심 워크로드에 적합한 형태로 단순화

기술 세부 설계는 이후 문서에서 다룬다.

---

## 7. “살릴 것”과 “버릴 것”의 명확한 선언

### 7.1 반드시 살릴 것 (코어 자산)

- 시그널 수집 로직
- 시그널 스코어링 및 가중치 구조
- LLM 기반 판단 프롬프트와 출력 구조
- 리포트 생성 로직
- 상태/히스토리/대시보드 개념

### 7.2 과감히 제거할 것

- 브로커 연동
- 주문 실행
- 포지션 관리
- 계정/잔고 개념

---

## 8. 이 문서의 위치와 이후 흐름

이 문서는 다음 문서들의 기준점이 된다:

- PRD: 기능 명세 (무엇을 제공하는가)
- TRD: 기술 설계 (어떻게 구현하는가)
- 개발 계획: 단계/일정/PR 단위 계획

본 문서는 그 이전 단계인  
**“리팩토링의 방향과 의도를 합의하기 위한 문서”**이다.

---

## 9. 최종 요약

본 리팩토링은 다음을 목표로 한다:

- MAHORAGA의 핵심 가치를 보존한다
- 가장 위험한 부분(자동 매매)을 제거한다
- 시스템을 “시점 판단 엔진”으로 재정의한다
- 이후 확장 가능한 구조로 단순화한다

이 문서는 그 출발점이다.

